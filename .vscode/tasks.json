{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build Docs",
            "type": "shell",
            "command": [
                "Set-Location -Path (Join-Path -Path '${workspaceFolder}' -ChildPath '_Docs-Src');",
                "if ([bool]::Parse('${input:doClear}')) {",
                "   Get-ChildItem -Path '../Docs' | Remove-Item -Recurse",
                "};",
                "Get-ChildItem -Recurse -Path '*' -Filter '*.adoc' -Exclude '_*.adoc' -File | ForEach-Object -Process {",
                "   $target = (Resolve-Path -Path $PSItem.FullName -Relative).Replace('\\', '/');",
                "   wsl asciidoctor-reducer $target -o (Join-Path -Path '../Docs' -ChildPath $target).Replace('\\', '/');",
                "};"
            ],
            "problemMatcher": []
        }
    ],
    "inputs": [
        {
            "id": "doClear",
            "type": "pickString",
            "description": "Clear output directory?",
            "default": "true",
            "options": [
                "true",
                "false"
            ]
        }
    ]
}